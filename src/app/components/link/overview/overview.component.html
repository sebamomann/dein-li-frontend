<main>
  <div class="header">
    <mat-select [(value)]="filter" (valueChange)="changedFilter()">
      <mat-option value="iat">Erstelldatum</mat-option>
      <mat-option value="calls">Aufrufe gesamt</mat-option>
      <mat-option value="calls_version">Aufrufe aktuelle Version</mat-option>
    </mat-select>
    <mat-icon (click)="changedOrder()">keyboard_arrow_down</mat-icon>
  </div>

  <ng-container *ngIf="loaded; else loading">
    <div class="link-list"
         infiniteScroll
         [immediateCheck]="true"
         [infiniteScrollDistance]="1"
         [infiniteScrollThrottle]="50"
         (scrolled)="onScroll()"
         [@listAnimation]="links.length">
      <div class="card-block"
           *ngFor="let link of links; trackBy: linkTrackBy"
           (click)="redirectToLink(link)">
        <span>{{link.short}}</span>
        <span>{{link.original | truncate: [50, '...']}}</span>
        <span *ngIf="link.nrOfCalls"
              class="nrOfCalls">Aufrufe: {{link.nrOfCalls }}</span>
        <span class="date">{{link.iat | date : 'dd.MM.yyyy'}}</span>
      </div>
    </div>
  </ng-container>
</main>

<ng-template #loading>
  <app-hexagon-loader [message]="'Lade Daten'"></app-hexagon-loader>
</ng-template>
